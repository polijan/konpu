#include "memory.h"

// Definition of Konpu's RAM memory
alignas(max_align_t)
#if defined(__GNUC__)
    __attribute__((__may_alias__))
#endif
uint8_t KonpuMemory[KONPU_MEMORY_SIZE];


// Definition of Konpu's ROM
const uint8_t KonpuROM[KONPU_ROM_SIZE] = {
   // Konpu Version:
   KONPU_VERSION_MAJOR, // Major
   KONPU_VERSION_MINOR, // Minor
   // Patch (encoded as 16-bit LITTLE endian):
   (KONPU_VERSION_PATCH & 0xFF), (KONPU_VERSION_PATCH >> 8),

   // Possible Framebuffer Resolutions (size in 8x8 cells)
   // (framebuffer "factor" --> see: tools/resfinder)
#if VIDEO_SIZE_FACTOR_ == 7
   // 20160 bytes (~19.7Kb) -- also allow 7 bitplanes

   //------..---------.--------.-----.-----------------------------------------
   // WxH  // Pixels  | Aspect |Bytes| Type of modes (bitplanes, number of)
   //      // Resltn. | Ratio  |8x8 / attribute bytes per 8x8px, packed pixels)
   //------//---------|--------|---/-------------------------------------------
   60, 42, // 480x336 |1.42857 | 8| 1 bitplane, i.e. "monochrome" modes
   56, 40, // 448x320 |1.4     | 9| attributes: 1 byte  per 8x8
   56, 36, // 448x288 |1.55555 |10| attributes: 2 bytes per 8x8
   48, 35, // 384x280 |1.37143 |12| attributes: 4 bytes per 8x8                *
   42, 30, // 336x240 |1.4     |16| 4-colors chunky pixels / 2 bitplanes /
           //         |        |  |             attributes:  8 bytes per 8x8
   35, 24, // 280x192 |1.45833 |24| 3 bitplanes, ie. 8 colors / attr: 16 bytes *
   30, 21, // 240x168 |1.42857 |32| 16-color chunky pixels / 4 bitplanes
   28, 18, // 224x144 |1.55555 |40| 5 bitplanes, i.e.  32 colors
   28, 15, // 224x120 |1.86666 |48| 6 bitplanes, i.e.  64 colors
   24, 15, // 192x120 |1.6     |56| 7 bitplanes, i.e. 128 colors
   21, 15, // 168x120 |1.4     |64| 256-color byte pixels / 8 bitplanes
#elif VIDEO_SIZE_FACTOR_ == 6
   // 17280 bytes (~16.9Kb)
   // this factor lends itself well to favor wide ratio (1.6 - 1.875)
   // exception the default for 256 color mode, but even then it could be
   // changed to 160x108 (AR: 1.48148) for pixel modes.
   60, 36, // 480x288 |1.66666 | 8|
   60, 32, // 480x256 |1.875   | 9|
   54, 32, // 432x256 |1.6875  |10|
   48, 30, // 384x240 |1.6     |12|
   45, 24, // 360x192 |1.875   |16|  *
   36, 20, // 288x160 |1.8     |24|
   30, 18, // 240x144 |1.66666 |32|
   27, 16, // 216x128 |1.6875  |40|
   24, 15, // 192x120 |1.6     |48|
    0,  0, // > NOT AVAILABLE <|56|
   18, 15, // 144x120 |1.2     |64|
#elif VIDEO_SIZE_FACTOR_ == 5
   // 14400 bytes (~14Kb)            odd (in mode <= 24)
   50, 36, // 400x288 |1.38888 | 8|
   50, 32, // 400x256 |1.5265  | 9|
 45, 32, // 360x256 |1.40625 |10|  *
//   48, 30, // 384x240 |1.6     |10|
   40, 30, // 320x240 |1.33333 |12|
 36, 25, // 288x200 |1.44    |16|  *
//   30, 30, // 240x240 | 1      |16|
   30, 20, // 240x160 |1.5     |24|
   25, 18, // 200x144 |1.38888 |32|
   24, 15, // 192x120 |1.6     |40|
   20, 15, // 160x120 |1.33333 |48|
    0,  0, // > NOT AVAILABLE <|56|
   15, 15, // 120x120 |1       |64|  144x100px (AR=1.44) common for 256c pixels
#elif VIDEO_SIZE_FACTOR_ == 4
   // 11520 bytes (~11.25Kb)
   // this factor lends itself well to favor almost square ratios (1.06 - 1-25)
   40, 36, // 320x288 |1.11111 | 8|
   40, 32, // 320x256 |1.25    | 9|
   36, 32, // 288x256 |1.125   |10|
   32, 30, // 256x240 |1.06666 |12|
   30, 24, // 240x192 |1.25    |16|
   24, 20, // 192x160 |1.2     |24|
   20, 18, // 160x144 |1.11111 |32|
   18, 16, // 144x128 |1.125   |40|
   16, 15, // 128x120 |1.06666 |48|
    0,  0, // > NOT AVAILABLE <|56|
   15, 12, // 120x96  |1.25    |64|
#elif VIDEO_SIZE_FACTOR_ == 3
   // 8640 bytes (~8.4Kb)
   40, 27, // 320x216 |1.48148 | 8|  *
   40, 24, // 320x192 |1.66666 | 9|
   36, 24, // 288x192 |1.5     |10|
   36, 20, // 288x160 |1.8     |12|
   30, 18, // 240x144 |1.66666 |16|
   24, 15, // 192x120 |1.6     |24|  *
   18, 15, // 144x120 |1.2     |32|
   18, 12, // 144x96  |1.5     |40|
   18, 10, // 144x80  |1.8     |48|
    0,  0, // > NOT AVAILABLE <|56|
   15,  9, // 120x172 |1.66666 |64|
#elif VIDEO_SIZE_FACTOR_ == 2
   // 5760 bytes (~5.6Kb)
   36, 20, // 288x160 |1.8     | 8|
   32, 20, // 256x160 |1.6     | 9|
   32, 18, // 256x144 |1.77777 |10|
   30, 16, // 240x128 |1.875   |12|
   24, 15, // 192x120 |1.6     |16|  *
   20, 12, // 160x96  |1.66666 |24|
   18, 10, // 144x80  |1.8     |32|
   16,  9, // 128x72  |1.77777 |40|
   15,  8, // 120x64  |1.875   |48|
    0,  0, // > NOT AVAILABLE <|56|
   10,  9, //  80x72  |1.11111 |64|
#else
#   error "This VIDEO_SIZE_FACTOR_ is not implemented"
   ??, ??, // ???x??? |?       | 8|
   ??, ??, // ???x??? |?       | 9|
   ??, ??, // ???x??? |?       |10|
   ??, ??, // ???x??? |?       |12|
   ??, ??, // ???x??? |?       |16|
   ??, ??, // ???x??? |?       |24|
   ??, ??, // ???x??? |?       |32|
   ??, ??, // ???x??? |?       |40|
   ??, ??, // ???x??? |?       |48|
    0,  0, // > NOT AVAILABLE <|56|
   ??, ??, // ???x??? |?       |64|
#endif
   // Konpu's Master sRGB Palette (24 bits colors listed as R,G,B)
   // (Autogenerated by choosing 256 k-means clusters from every possible
   //  sRGB colors using an OkLab perceptual distance. see: tools/kule)
   0x11, 0x0b, 0x11,  0x16, 0x21, 0x15,  0x11, 0x0e, 0x32,  0x33, 0x10, 0x14,
   0x1c, 0x35, 0x18,  0x4e, 0x12, 0x1c,  0x13, 0x12, 0x53,  0x43, 0x2a, 0x1c,
   0x1d, 0x28, 0x3e,  0x31, 0x0f, 0x38,  0x20, 0x3d, 0x43,  0x1e, 0x48, 0x1b,
   0x68, 0x18, 0x16,  0x16, 0x14, 0x72,  0x48, 0x41, 0x20,  0x4c, 0x15, 0x45,
   0x66, 0x37, 0x23,  0x4c, 0x35, 0x4e,  0x28, 0x59, 0x1e,  0x68, 0x19, 0x39,
   0x26, 0x49, 0x67,  0x1f, 0x30, 0x65,  0x26, 0x6b, 0x20,  0x66, 0x19, 0x5c,
   0x34, 0x14, 0x60,  0x5c, 0x52, 0x23,  0x27, 0x52, 0x48,  0x27, 0x3d, 0x85,
   0x83, 0x1b, 0x1f,  0x15, 0x1b, 0x8c,  0x59, 0x4e, 0x56,  0x5b, 0x3d, 0x79,
   0x4c, 0x1a, 0x6f,  0x82, 0x3f, 0x26,  0x39, 0x19, 0x8b,  0x2d, 0x7d, 0x24,
   0x2b, 0x60, 0x6d,  0x66, 0x18, 0x7e,  0x5b, 0x68, 0x24,  0x2c, 0x66, 0x4d,
   0x80, 0x19, 0x4c,  0x78, 0x3d, 0x5a,  0x1b, 0x17, 0xa8,  0x7f, 0x6f, 0x2a,
   0x7f, 0x1f, 0x74,  0x2b, 0x56, 0x89,  0x9e, 0x1f, 0x1d,  0x79, 0x46, 0xa1,
   0x22, 0x37, 0xa5,  0x97, 0x21, 0x44,  0x2f, 0x8d, 0x23,  0x9f, 0x47, 0x27,
   0x55, 0x1d, 0x97,  0x61, 0x67, 0x5d,  0x63, 0x5a, 0x88,  0xa6, 0x47, 0x5c,
   0x91, 0x46, 0x81,  0x30, 0x64, 0xac,  0x7f, 0x58, 0x27,  0x77, 0x1e, 0x98,
   0x31, 0x78, 0x4e,  0x9e, 0x64, 0x2d,  0x30, 0x6d, 0x8e,  0x9a, 0x1d, 0x69,
   0x1c, 0x1c, 0xc3,  0x72, 0x93, 0x2b,  0x6a, 0x1f, 0xb4,  0x30, 0x79, 0x75,
   0xb7, 0x22, 0x21,  0x45, 0x1d, 0xb4,  0x34, 0x9e, 0x25,  0xb1, 0x1d, 0x4d,
   0x19, 0x1d, 0xdd,  0x78, 0xa7, 0x2f,  0x94, 0x1f, 0x91,  0x84, 0x59, 0x61,
   0x53, 0x43, 0xa4,  0x66, 0x80, 0x2b,  0xbb, 0x4e, 0x2a,  0x40, 0x1f, 0xd8,
   0x36, 0x96, 0x50,  0x69, 0x66, 0xbd,  0xb3, 0x24, 0x73,  0x36, 0xae, 0x29,
   0x8b, 0x21, 0xb5,  0x76, 0x7d, 0x65,  0x24, 0x4f, 0xaa,  0xa1, 0x68, 0x69,
   0x52, 0x29, 0xf1,  0x2b, 0x5d, 0xce,  0x70, 0x74, 0x8d,  0x5e, 0x20, 0xd1,
   0x35, 0x88, 0x5f,  0x27, 0x42, 0xc8,  0x35, 0x84, 0x9d,  0xae, 0x23, 0x92,
   0x23, 0x20, 0xf4,  0xa6, 0x4c, 0xb4,  0x87, 0x4f, 0xca,  0x32, 0x75, 0xd0,
   0x8b, 0x63, 0x9c,  0x37, 0x78, 0xb0,  0x5c, 0x4a, 0xcc,  0x72, 0x27, 0xf0,
   0x26, 0x44, 0xec,  0x34, 0x59, 0xf0,  0x37, 0x70, 0xef,  0x7e, 0x22, 0xd2,
   0x39, 0x8f, 0x86,  0x3b, 0x86, 0xee,  0xa0, 0x6c, 0xc4,  0xa7, 0x20, 0xb4,
   0x3b, 0xa4, 0x9b,  0x80, 0x9f, 0xc4,  0x6e, 0x57, 0xed,  0xa2, 0x7a, 0x99,
   0x9e, 0x24, 0xd4,  0x39, 0x96, 0xaf,  0x79, 0x8e, 0x96,  0x91, 0x2a, 0xf0,
   0xb3, 0x57, 0x8e,  0x35, 0x8b, 0xca,  0xd8, 0x56, 0x90,  0x9c, 0x59, 0xeb,
   0xa4, 0x83, 0x6b,  0x77, 0x75, 0xe9,  0xcb, 0x55, 0xbe,  0x35, 0x9d, 0x77,
   0xc9, 0x27, 0x6d,  0x3c, 0x9a, 0xef,  0xca, 0x22, 0x47,  0xbc, 0x29, 0xd3,
   0x3c, 0xa8, 0x5c,  0x77, 0x82, 0xbf,  0xc8, 0x29, 0x92,  0xc9, 0x51, 0x60,
   0xb2, 0x29, 0xf1,  0xaa, 0x8c, 0xc8,  0xbb, 0x6c, 0x2f,  0x3d, 0xb1, 0x86,
   0xe1, 0x23, 0x86,  0x81, 0x94, 0xec,  0x7e, 0xbb, 0x32,  0xc4, 0x23, 0xb2,
   0x3c, 0xab, 0xbd,  0x96, 0x7f, 0x2d,  0xa4, 0x7d, 0xed,  0xd9, 0x55, 0x2c,
   0x40, 0xbd, 0xac,  0xe0, 0x26, 0x5e,  0x38, 0xbe, 0x2b,  0xd2, 0x28, 0xf0,
   0xce, 0x27, 0x1f,  0x3a, 0x9f, 0xd2,  0x9d, 0x97, 0x30,  0x42, 0xba, 0xd1,
   0xdf, 0x25, 0xac,  0x79, 0x96, 0x69,  0xc9, 0x71, 0x72,  0xc7, 0x73, 0xb1,
   0x3c, 0xb9, 0x62,  0x43, 0xaf, 0xee,  0xf5, 0x31, 0x7b,  0x80, 0xa9, 0x9b,
   0x47, 0xcc, 0xcb,  0xba, 0x86, 0x30,  0xc2, 0x59, 0xea,  0x81, 0xd0, 0x35,
   0xa6, 0x97, 0x9e,  0xd8, 0x77, 0x31,  0xda, 0x28, 0xd1,  0x41, 0xc5, 0x8c,
   0xe3, 0x24, 0x28,  0x93, 0xae, 0xeb,  0xf4, 0x31, 0xa2,  0x84, 0xb2, 0x6e,
   0xc1, 0x9a, 0xec,  0x92, 0xc1, 0x9f,  0xcc, 0x88, 0x9e,  0x3a, 0xcd, 0x2c,
   0xf0, 0x2b, 0xee,  0x49, 0xc4, 0xf0,  0xf4, 0x27, 0x4f,  0x93, 0xb7, 0xc4,
   0xec, 0x5e, 0xea,  0x40, 0xcb, 0x65,  0xee, 0x97, 0xa7,  0xee, 0x59, 0x65,
   0xa7, 0x9f, 0x70,  0xc3, 0xa4, 0xc7,  0xf3, 0x2f, 0xc9,  0x42, 0xd7, 0xed,
   0xf5, 0x35, 0x24,  0x46, 0xd3, 0xae,  0xee, 0x86, 0xec,  0xac, 0xd6, 0x38,
   0xcc, 0x79, 0xe5,  0xaa, 0xaa, 0x33,  0x44, 0xd9, 0x8a,  0xef, 0x7e, 0x72,
   0x92, 0xcb, 0xeb,  0x8e, 0xca, 0x76,  0xcd, 0x98, 0x33,  0xc3, 0xbc, 0xe9,
   0xab, 0xc0, 0x36,  0xcc, 0x90, 0x6f,  0x91, 0xd6, 0xcb,  0xe8, 0x88, 0xc4,
   0x41, 0xdc, 0x61,  0xf0, 0x86, 0x34,  0xc3, 0xaa, 0x9d,  0xbb, 0xdc, 0xeb,
   0xee, 0x62, 0xc0,  0x41, 0xe3, 0xd0,  0xef, 0x6d, 0x97,  0x3d, 0xdd, 0x2a,
   0xeb, 0xcc, 0xea,  0xcd, 0xca, 0x3a,  0xc1, 0xcb, 0x84,  0x91, 0xdf, 0xa9,
   0xec, 0xa8, 0xe7,  0x40, 0xeb, 0x7d,  0xf2, 0x64, 0x30,  0xa7, 0xf4, 0xe6,
   0x88, 0xe6, 0x37,  0xc4, 0xdf, 0xb9,  0xeb, 0xbc, 0x89,  0xc2, 0xc5, 0xba,
   0x41, 0xe7, 0xaa,  0xed, 0x9f, 0x7a,  0x8f, 0xe2, 0x7b,  0x5f, 0xe7, 0xf1,
   0xcf, 0xb2, 0x34,  0xeb, 0xb4, 0xbb,  0x3c, 0xeb, 0x35,  0xc5, 0xe1, 0x7f,
   0xc0, 0xb2, 0x74,  0xef, 0xbb, 0x40,  0x51, 0xf6, 0xc8,  0xee, 0xa2, 0x39,
   0xe7, 0xee, 0xeb,  0xc5, 0xe5, 0x38,  0xa9, 0xf5, 0xb5,  0xa9, 0xf6, 0x7e,
   0xed, 0xd1, 0x3d,  0xe6, 0xf3, 0xc0,  0x51, 0xf8, 0x70,  0xec, 0xd4, 0xc0,
   0x50, 0xf6, 0xeb,  0xa3, 0xf7, 0x37,  0xe7, 0xf4, 0x8a,  0xee, 0xe5, 0x42,
   0x53, 0xf7, 0xa0,  0xed, 0xd8, 0x8a,  0xe2, 0xf8, 0x3d,  0x4b, 0xf9, 0x30,

   // Default 2-color palette:
     0,   1,
   // Default 4-color palette:
     2,   3,   4,   5,
   // Default 8-color palette:
     6,   7,   8,   9,  10,  11,  12,  13,
   // Default 16-color palette:
    14,  15,  16,  17,  18,  19,  20,  21,  22,  23,  24,  25,  26,  27,  28,  29,
   // Default 32-color palette:
    30,  31,  32,  33,  34,  35,  36,  37,  38,  39,  40,  41,  42,  43,  44,  45,
    46,  47,  48,  49,  50,  51,  52,  53,  54,  55,  56,  57,  58,  59,  60,  61,
   // Default 64-color palette:
    62,  63,  64,  65,  66,  67,  68,  69,  70,  71,  72,  73,  74,  75,  76,  77,
    78,  79,  80,  81,  82,  83,  84,  85,  86,  87,  88,  89,  90,  91,  92,  93,
    94,  95,  96,  97,  98,  99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109,
   110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125,
   // Two last colors in 128-color palette
   126, 127,

   // Wav format header, see: http://soundfile.sapp.org/doc/WaveFormat/
   // numbers are in little endian in the wav file (it doesn't matter)
   //
   // "RIFF" chunk description:
    'R', 'I', 'F', 'F',  // ChunkID       -> "RIFF"
   0xff,0xff,0xff,0xff,  // ChunkSize     -> (*)
    'W', 'A', 'V', 'E',  // Format        -> "WAVE"
   // "fmt" sub chunk:
    'f', 'm', 't', ' ',  // SubChunk1     -> "fmt "
   0x10,0x00,0x00,0x00,  // SubChunk1Size -> number of bytes to follow -> 16
   0x01,0x00,            // AudioFormat   -> 1 for PCM
   0x01,0x00,            // NumChannels   -> 1 (mono)
   0x40,0x1f,0x00,0x00,  // SampleRate    -> 8000 Hz
   0x40,0x1f,0x00,0x00,  // ByteRate      -> SampleRate * NumChannels *
                         //                  BitsPerSample/8 -> 8000*1*8/8
   0x01,0x00,            // BlockAlign    -> NumChannels * BitsPerSample/8 -> 1
   0x08,0x00,            // BitsPerSample -> 8
   // "data" sub chunk:
    'd', 'a', 't', 'a',  // SubChunk2     -> "data"
   0xff,0xff,0xff,0xff,  // SubChunk2Size -> (*) normally number of bytes in the
                         //                      data
   // (*) Simply put the max value instead of real length
   //     Software dealing with WAV know this means the rest of the file.





   // Fonts, etc.
   // ...

   // Static Strings...

   // Error Messages strings
/*
   ALE,LI,PONA, 0
   PAKALA,A,'.',MI,SONA,ALA,E,TAN, ' ','(','U','n','k','n','o','w','n',' ','E','r','r','o','r',')','\0',



 ' ','(','N','o',' ','E','r','r','o','r',')','\0',
   PAKALA,A, MI,SONA,ALA,E,TAN, ' ','(','U','n','k','n','o','w','n',' ','E','r','r','o','r',')','\0',
*/

   // Konpu URL strings
   'h','t','t','p','s',':','/','/','g','i','t','h','u','b','.','c','o','m','/',
   'p','o','l','i','j','a','n','/','k','o','n','p','u','\0',
};
